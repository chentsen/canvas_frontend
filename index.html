<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>cnvs</title>
  <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="vendor/bootstrap/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="vendor/jquery.gridster/jquery.gridster.css">
  <link rel="stylesheet" type="text/css" href="app/css/application.css">
  <link rel="stylesheet" type="text/css" href="app/css/application_.css">
  <link rel="stylesheet" type="text/css" href="app/css/grid.css">
  <link rel="stylesheet" type="text/css" href="app/css/helpers.css">
  <link rel="stylesheet" type="text/css" href="vendor/circular_nav/circular_nav.css">
  <script src="vendor/modernizr-2.6.2.min.js"></script>
</head>
<body>

  <!--
    ****** Application Template ******
  -->
  <script type="text/x-handlebars">
    <div class="topbar">
      <a href="#" class="canvas-logo-container c-fl">
        <img class="canvas-logo" src="img/canvas_logo.gif"/>
      </a>

      <!--
      <ul class="grid-actions">
        <li class="grid-action add-photo">Photo</li>
        <li class="grid-action add-quote">Quote</li>
      </ul>
      -->

      <ul class="main-nav">
        <!--
        <li class="main-nav-item">
          <a href="#/browse">Browse</a>
        </li>
        -->
        <li class="main-nav-item">
          <button data-toggle="modal" href="#create-canvas-modal" class="create-canvas-button btn btn-primary">Create Canvas</button>
        </li>
        <li class="main-nav-item">
          <div class="dropdown">
            <a class="user-avatar-container" data-toggle="dropdown">
              <img class="user-avatar" src="dummy_data/wooju.jpg"/><span class="down-arrow"></span>
            </a>
            <ul class="dropdown-menu pull-right">
              <li><a tabindex="-1" href="#/browse/my">My Canvases</a></li>
              <li><a tabindex="-1" href="#/settings">Settings</a></li>
              <li class="divider"></li>
              <li><a tabindex="-1" href="#">Logout</a></li>
            </ul>
          </div>
        </li>
      </ul>
    </div>

    <div class="main-content-container">{{outlet}}</div>


    <!-- Create canvas modal -->
    <div class="modal fade" id="create-canvas-modal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">New Canvas</h4>
          </div>
          <div class="modal-body">


  <div class="form-group">
    <label for="new-canvas-title">Title</label>
    <input type="text" class="form-control" id="new-canvas-title" placeholder="Title">
  </div>
  <div class="form-group">
    <label for="new-canvas-description">Description</label>
    <input type="text" class="form-control" id="new-canvas-description" placeholder="Description">
  </div>

          </div>
          <div class="modal-footer">
            <!--<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>-->
            <button type="button" class="btn btn-primary">Create</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->


  </script>

  <!--
    ****** Canvas Template ******
  -->
  <script type="text/x-handlebars" data-template-name="canvas">
    <div class="canvas-view-container">
      <ul class="participants">
        <li class="participant-avatar-container">
          <img class="participant-avatar" src="img/andy.jpg"/>
        </li>
        <li class="participant-avatar-container">
          <img class="participant-avatar" src="img/yoshi.jpg"/>
        </li>
      </ul>

      <div class="gridster" id="the-grid">
        <ul class="tile-list">
        </ul>
      </div>

      {{view App.CanvasActionsView}}
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="canvas-actions">
    <div class="cn-container">
      <button class="cn-button" id="cn-button">+</button>
      <div class="cn-wrapper" id="cn-wrapper">
          <ul>
            <li><a href="#"><span class="icon-picture"></span></a></li>
            <li><a href="#"><span class="icon-headphones"></span></a></li>
            <li><a href="#"><span class="icon-home"></span></a></li>
            <li><a href="#"><span class="icon-facetime-video"></span></a></li>
            <li><a href="#"><span class="icon-envelope-alt"></span></a></li>
           </ul>
      </div>
      <div id="cn-overlay" class="cn-overlay"></div>
    </div>
  </script>

  <!--
    ****** Browse Template ******
  -->
  <script type="text/x-handlebars" data-template-name="browse">
    <ul class="leftnav">
      <li><a href="#/browse/my">My Canvases</a></li>
      <li><a href="#/browse/trending">Favorite</a></li>
    </ul>
    <div class="browse-content-container">{{outlet}}</div>
  </script>

  <script type="text/x-handlebars" data-template-name="browse/my">
    <ul class="canvas-list">
      {{#each model}}
      <li class="canvas-list-item">
        <img {{bindAttr src="image"}}/>
        <ul class="participant-list">
          {{#each participants}}
            <li class="participant-list-item"><img {{bindAttr src="avatar_url"}}/></li>
          {{/each}}
        </ul>
      </li>
      {{/each}}
    </ul>
  </script>

  <script type="text/x-handlebars" data-template-name="browse/trending">
    <ul class="trending-list">
      {{#each model}}
      <li class="trending-list-item">
        <div class="trending-list-item-header">{{canvas.name}}</div>
        <img {{bindAttr src="image"}}/>
        <ul class="participant-list hide">
          {{#each participants}}
            <li class="participant-list-item"><img {{bindAttr src="avatar_url"}}/></li>
          {{/each}}
        </ul>
      </li>
      {{/each}}
    </ul>
  </script>

  <!--
    ****** Landing Page Template ******
  -->
  <script type="text/x-handlebars" data-template-name="landing">
    <h2>Join Canvas!</h2>
    <a href="javascript:void(0);" class="fb-sign-in">Sign In</a>
  </script>


<!--
  <div class="gridster" id="the-grid">
    <ul class="tile-list">
      <li class="tile-container" data-row="1" data-col="1" data-sizex="1" data-sizey="1"><div class="tile-content"></div></li>
      <li class="tile-container" data-row="2" data-col="1" data-sizex="1" data-sizey="1"><div class="tile-content"></div></li>
      <li class="tile-container" data-row="3" data-col="1" data-sizex="1" data-sizey="1"><div class="tile-content"></div></li>

      <li class="tile-container" data-row="1" data-col="2" data-sizex="2" data-sizey="1"><div class="tile-content"></div></li>
      <li class="tile-container" data-row="2" data-col="2" data-sizex="2" data-sizey="2"><div class="tile-content"></div></li>

      <li class="tile-container" data-row="1" data-col="4" data-sizex="1" data-sizey="1"><div class="tile-content"></div></li>
      <li class="tile-container" data-row="2" data-col="4" data-sizex="2" data-sizey="1"><div class="tile-content"></div></li>
      <li class="tile-container" data-row="3" data-col="4" data-sizex="1" data-sizey="1"><div class="tile-content"></div></li>

      <li class="tile-container" data-row="1" data-col="5" data-sizex="1" data-sizey="1"><div class="tile-content"></div></li>
      <li class="tile-container" data-row="3" data-col="5" data-sizex="1" data-sizey="1"><div class="tile-content"></div></li>

      <li class="tile-container" data-row="1" data-col="6" data-sizex="1" data-sizey="1"><div class="tile-content"></div></li>
      <li class="tile-container" data-row="2" data-col="6" data-sizex="1" data-sizey="2"><div class="tile-content"></div></li>

      <li class="tile-container" data-row="1" data-col="7" data-sizex="2" data-sizey="2"><div class="tile-content"></div></li>
      <li class="tile-container" data-row="3" data-col="7" data-sizex="2" data-sizey="2"><div class="tile-content"></div></li>
    </ul>
  </div>
-->

  <script src="vendor/jquery-1.10.2.js"></script>
  <script src="vendor/ember/handlebars-1.0.0-rc.4.js"></script>
  <script src="vendor/ember/ember-1.0.0-rc.6.1.js"></script>
  <script src="vendor/ember/ember-data-latest.js"></script>
  <script src="vendor/bootstrap/bootstrap.js"></script>
  <script src="vendor/jquery.gridster/jquery.gridster.js"></script>
  <script src="app/js/app.js"></script>
  <script src="app/js/models/canvas.js"></script>
  <script src="app/js/views/canvas/actions.js"></script>
  <script src="dummy_data/test_data.js"></script>

  <script>
    var cnvs = {};
    $(function(){ //DOM Ready
      $(".gridster ul").gridster({
        widget_margins: [0, 0],
        widget_base_dimensions: [140, 140],
        max_cols: 8,
        max_size_x: 8,
        responsive: true,
        autogenerate_stylesheet: false
      });

      cnvs.grid = $(".gridster ul").gridster().data('gridster');

      /* test data */
      var photoCount = 0,
          quoteCount = 0;
      console.debug('hihi');
      $('.add-photo').on('click', function (e) {
        console.debug('adding photo');
        cnvs.grid.add_widget('<li class="tile-container" style="background:#000 url(\'' + test_data.images[photoCount++].src + '\') no-repeat center center;"></li>', 2, 2, 1, 1);
      });
      $('.add-quote').on('click', function (e) {
        console.debug('adding quote');
        var q = test_data.quotes[quoteCount++];
        cnvs.grid.add_widget('<li class="tile-container" style="background-color:' + q.color + '"><div class="quote-text-heightfix"></div><div class="quote-text">' + q.text + '</div></li>', 2, 1, 1, 1);
      });

      /*
      $('body').delegate('.fb-sign-in', 'click', function() {
        $.ajax({
          type: "POST",
          url: "http://api.use-canvas.com:6005/v1/user/fb_oauth",
          success: function(data, textStatus, jqXHR) {
            console.debug('SUCCESS');
          },
          error: function(jqXHR, textStatus, errorThrown) {
            console.debug('ERROR');
          }
        });
      });
      */
    });
  </script>
</body>
</html>
